(this["webpackJsonpcodezilla-hours"]=this["webpackJsonpcodezilla-hours"]||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),o=a.n(i),l=(a(96),a(32)),c=a.n(l),s=a(45),u=a(38),d=a(50),m=a(53),p=a(31),h=a(153),f=a(173),g=a(116),b=a(61),y=a.n(b);y.a.initializeApp({apiKey:"AIzaSyAkvaF-lqt8ZxyBwcNlwrHhj-Pp3Ev54pI",authDomain:"codezilla-hours.firebaseapp.com",databaseURL:"https://codezilla-hours.firebaseio.com",projectId:"codezilla-hours",storageBucket:"codezilla-hours.appspot.com",messagingSenderId:"634823174203",appId:"1:634823174203:web:ca40af276111cfae66541e",measurementId:"G-DR0KK33WCW"});var E=y.a,v=a(156),w=a(158),k=a(159),C=a(78),x=a.n(C),j=Object(h.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function I(e){var t=e.profile,a=j();return r.a.createElement("div",{className:a.root},r.a.createElement(v.a,{position:"static"},r.a.createElement(w.a,null,r.a.createElement(g.a,{variant:"h6",className:a.title},"CODEZILLA Hours"),r.a.createElement(k.a,{component:m.b,color:"inherit",to:"/"},"Urenstaat"),r.a.createElement(k.a,{color:"inherit",startIcon:r.a.createElement(x.a,null)},t.displayName))))}var O=a(9),T=a(55),D=a(28),N=a(79),S=a(80),B=a(81),M=a(177),z=a(160),L=a(161),A=a(182),H=a(174),W=a(180),P=a(178),J=a(164),F=a(176),G=[{id:"worked",description:"Gewerkt",enabled:!0},{id:"overtime",description:"Overwerk",enabled:!0},{id:"sick",description:"Ziek",enabled:!0},{id:"holiday",description:"Verlof",enabled:!0},{id:"publicHoliday",description:"Feestdag",enabled:!0},{id:"available",description:"Beschikbaar",enabled:!1},{id:"education",description:"Opleiding",enabled:!1},{id:"other",description:"Overig",enabled:!1},{id:"standBy",description:"StandBy",enabled:!1},{id:"kilometers",description:"Kilometers",enabled:!1}],K=[{id:1,description:"Januari"},{id:2,description:"Februari"},{id:3,description:"Maart"},{id:4,description:"April"},{id:5,description:"Mei"},{id:6,description:"Juni"},{id:7,description:"Juli"},{id:8,description:"Augustus"},{id:9,description:"September"},{id:10,description:"Oktober"},{id:11,description:"November"},{id:12,description:"December"}],Z=[2020,2021,2022,2023,2025],R=(new Date).getFullYear(),V=(new Date).getMonth()+1,U=function(e){var t=e.isTemplate,a=e.client,n=e.project,i=e.expandColumns,o=e.handleInputChange;return t?null:r.a.createElement(w.a,null,r.a.createElement(z.a,{container:!0,direction:"row",alignItems:"flex-start"},r.a.createElement(L.a,null,r.a.createElement(A.a,{id:"select-month-label"},"Maand"),r.a.createElement(H.a,{labelId:"select-month-label",id:"select-month-label",defaultValue:V,onChange:function(e){return o("month",e.target.value)}},K.map((function(e){return r.a.createElement(W.a,{value:e.id,key:e.id},e.description)})))),r.a.createElement(L.a,null,r.a.createElement(A.a,{id:"select-year-label"},"Jaar"),r.a.createElement(H.a,{labelId:"select-year-label",id:"select-year-label",defaultValue:R,onChange:function(e){return o("year",e.target.value)}},Z.map((function(e){return r.a.createElement(W.a,{value:e,key:e},e)})))),r.a.createElement(P.a,{id:"client",label:"Klant",value:a,onChange:function(e){return o("client",e.target.value)}}),r.a.createElement(P.a,{id:"project",label:"Project",value:n,onChange:function(e){return o("project",e.target.value)}}),r.a.createElement(J.a,{control:r.a.createElement(F.a,{checked:i,onChange:function(e){return o("expandColumns",e.target.checked)},color:"primary"}),label:"Toon alle velden"})))},Y=a(169),q=a(115),$=a(170),Q=a(171),X=a(166),_=a(167),ee=a(165),te=G,ae=function(e){var t=e.expandColumns,a=e.days;return a.length?r.a.createElement(ee.a,null,r.a.createElement(X.a,null,r.a.createElement(_.a,null," Totaal"),te.map((function(e){return e.enabled||t?r.a.createElement(_.a,{align:"right",key:"footer-"+e.id},function(e){return a.map((function(t){return t[e]})).reduce((function(e,t){return Number(e)+Number(t)}))}(e.id)):null})),r.a.createElement(_.a,{align:"right"}))):null},ne=a(25),re=function(e){var t=e.row,a=e.column,n=e.days,i=e.handleChange,o=e.isTemplate,l=e.save;return t?r.a.createElement(_.a,{align:"right",key:t.day+"-"+a},r.a.createElement(P.a,{id:a,inputProps:{style:{textAlign:"right"},day:t.day},value:t[a],onChange:function(e){return function(e,t,a){var r=Object(ne.a)(n),o=Number(e);r[a][t]=isNaN(o)?"":o,i("days",r)}(e.target.value,a,t.day-1)},onBlur:function(){return l(o)},size:"small"})):null},ie=a(168),oe=function(e){var t=e.expandColumns;return r.a.createElement(ie.a,null,r.a.createElement(X.a,null,r.a.createElement(_.a,null),G.map((function(e){return e.enabled||t?r.a.createElement(_.a,{align:"right",key:"header-"+e.id},e.description):null})),r.a.createElement(_.a,{align:"right"},"Toelichting")))},le=G,ce=function(e){var t=e.expandColumns,a=e.days,n=e.handleChange,i=e.save,o=e.month,l=e.year,c=e.isTemplate,s=function(e){var t=new Date(l,o-1,e+1).getDay();return 0!==t&&6!==t};return r.a.createElement(Y.a,{component:q.a,className:"hoursGrid"},r.a.createElement($.a,{stickyHeader:!0,size:"small","aria-label":"simple table"},r.a.createElement(oe,{expandColumns:t}),r.a.createElement(Q.a,null,a.map((function(e,o){return r.a.createElement(X.a,{key:e.day,className:(l=o,s(l)?"":"highlight")},r.a.createElement(_.a,{component:"th",scope:"row"},e.day),le.map((function(o,l){return o.enabled||t?r.a.createElement(re,{key:"".concat(o.id,"-").concat(l),row:e,column:o.id,handleChange:n,save:i,isTemplate:c,days:a}):null})),r.a.createElement(_.a,{align:"right"},s(e.dayOfTheWeek)?r.a.createElement(P.a,{id:"explanation",inputProps:{day:e.day},onBlur:function(t){return n(t.target.value,"explanation",e.day)}}):null));var l}))),r.a.createElement(ae,{expandColumns:t,days:a})))},se=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",days:[],month:"",year:"",expandColumns:!0,client:"",project:"",profileId:"",profile:"",snackbarOpen:!1,isLoading:!1,isTemplate:!1},a.fetchMonth=Object(s.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),t=E.firestore(),e.next=4,t.collection("months").where("month","==",a.state.month).where("year","==",a.state.year).where("profileId","==",a.state.profileId).get();case 4:n=e.sent,(r=n.docs.find((function(e){return e.data()})))&&r.exists?a.setState(Object(d.a)({},r.data(),{id:r.id})):a.setState({days:a.getDaysInMonth(a.state.month,a.state.year)}),a.setState({isLoading:!1});case 8:case"end":return e.stop()}}),e)}))),a.fetchTemplate=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),n=E.firestore(),e.next=4,n.collection("template").doc(t).get();case 4:(r=e.sent)&&r.exists&&a.setState({days:r.data().days,id:r.id}),a.setState({isLoading:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleInputChange=function(e,t){a.setState(Object(O.a)({},e,t),(function(){["month","year"].includes(e)&&a.fetchMonth()}))},a.submitHours=function(){E.firestore().collection("months").doc(a.state.year+"-"+a.state.month+"-"+a.state.profile.displayName).set({client:a.state.client,days:a.state.days,profile:a.state.profile,profileId:a.state.profileId,project:a.state.project,year:a.state.year,month:a.state.month}).then((function(e){a.setState((function(e){return e.snackbarOpen=!0,e}))})).catch((function(e){console.error("Error adding document: ",e)}))},a.submitTemplate=function(e){var t=e.map((function(e){return delete e.date,delete e.dayOfTheWeek,e}));E.firestore().collection("template").doc(a.props.profile.id).set({days:t}).then((function(e){a.setState((function(e){return e.snackbarOpen=!0,e}))})).catch((function(e){console.error("Error adding document: ",e)}))},a.save=function(e){e?a.submitTemplate(a.state.days):a.submitHours()},a.handleClose=function(e,t){"clickaway"!==t&&a.setState((function(e){return e.snackbarOpen=!1,e}))},a}return Object(B.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=(new Date).getFullYear(),a=(new Date).getMonth()+1,n=this.props,r=n.type,i=n.profile,o="template"===r;this.setState({isTemplate:o,profile:i,profileId:i.id,year:t,month:a},(function(){o?e.fetchTemplate(i.id):e.fetchMonth()}))}},{key:"getDaysInMonth",value:function(e,t){for(var a=new Date(t,e,0).getDate(),n=[],r=1;r<a;r++)n.push({day:r,date:new Date(t,e-1,r),worked:"",overtime:"",sick:"",holiday:"",publicHoliday:"",available:"",education:"",other:"",standBy:"",kilometers:"",explanation:""});return n}},{key:"render",value:function(){return this.props.profile.id?r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(U,{setMonth:this.setMonth,handleInputChange:this.handleInputChange,client:this.state.client,project:this.state.project,expandColumns:this.state.expandColumns,isTemplate:this.state.isTemplate}),r.a.createElement(ce,{expandColumns:this.state.expandColumns,days:this.state.days,handleChange:this.handleInputChange,save:this.save,month:this.state.month,year:this.state.year,isTemplate:this.state.isTemplate}),r.a.createElement(M.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:this.handleClose,open:this.state.snackbarOpen,autoHideDuration:6e3,message:"Opgeslagen"})):null}}]),t}(n.Component),ue=a(179),de=a(172),me=Object(h.a)((function(e){return{root:{height:"100%",minHeight:"100%",width:"100%",position:"fixed",background:"url('./bg-pattern-triangles.png') 0 0 repeat"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"transparent"}}}));function pe(){var e=me();return r.a.createElement(de.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(ue.a,{className:e.avatar},r.a.createElement("img",{src:"./Icon-green.svg",alt:"CODEZILLA logo",height:"100%",width:"100%"})),r.a.createElement(g.a,{id:"preloadTitle",component:"h1",variant:"h4"},"CODEZILLA Hours"),r.a.createElement(g.a,{id:"preloadSubTitle",component:"h2",variant:"subtitle1"},"Bezig met aanmelden...")))}var he=Object(h.a)((function(e){return{activeItem:{backgroundColor:e.palette.primary[100]},item:{},menuButton:{marginRight:36},hide:{display:"none"},toolbar:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1},title:{margin:e.spacing(0,1)}}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){var e=he(),t=r.a.useState({}),a=Object(u.a)(t,2),n=a[0],i=a[1],o=r.a.useState(!0),l=Object(u.a)(o,2),d=l[0],h=l[1];r.a.useEffect((function(){!function(){var e=new E.auth.OAuthProvider("microsoft.com");e.setCustomParameters({tenant:"45c0a280-6475-473d-a8ee-a5684b93879c"}),E.auth().signInWithPopup(e).then((function(e){b(e.user)})).catch((function(e){}))}()}),[]);var b=function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.firestore(),e.next=3,a.collection("profile").get();case 3:if(n=e.sent,r=n.docs.find((function(e){return e.data().microsoftId===t.uid}))){e.next=8;break}return y(t),e.abrupt("return");case 8:(o=r.data()).id=r.id,i(o),h(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=E.firestore(),a={displayName:e.displayName,microsoftId:e.uid,email:e.email};t.collection("profile").add(a).then((function(e){a.id=e.id,i(a)})).catch((function(e){console.error("Error adding document: ",e)})),h(!1)};return r.a.createElement("div",{className:e.root},d?r.a.createElement(pe,null):r.a.createElement(m.a,null,r.a.createElement(f.a,null),r.a.createElement(I,{profile:n}),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement(se,{type:"month",profile:n})),r.a.createElement(p.a,{path:"/template"},r.a.createElement(g.a,{variant:"h4",component:"h4",className:e.title},"Template"),r.a.createElement(se,{type:"template",profile:n})))),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-app.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-analytics.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-auth.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-firestore.js"}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,a){e.exports=a(114)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.60b1dcaf.chunk.js.map