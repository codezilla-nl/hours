(this["webpackJsonpcodezilla-hours"]=this["webpackJsonpcodezilla-hours"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),o=a.n(i),l=(a(94),a(32)),c=a.n(l),s=a(45),u=a(38),d=a(51),m=a(47),p=a(31),h=a(157),f=a(165),g=a(114),b=a(62),y=a.n(b);y.a.initializeApp({apiKey:"AIzaSyAkvaF-lqt8ZxyBwcNlwrHhj-Pp3Ev54pI",authDomain:"codezilla-hours.firebaseapp.com",databaseURL:"https://codezilla-hours.firebaseio.com",projectId:"codezilla-hours",storageBucket:"codezilla-hours.appspot.com",messagingSenderId:"634823174203",appId:"1:634823174203:web:ca40af276111cfae66541e",measurementId:"G-DR0KK33WCW"});var v=y.a,E=a(160),k=a(162),w=a(163),O=a(75),j=a.n(O),C=Object(h.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function I(e){var t=e.profile,a=C();return r.a.createElement("div",{className:a.root},r.a.createElement(E.a,{position:"static"},r.a.createElement(k.a,null,r.a.createElement(g.a,{variant:"h6",className:a.title},"CODEZILLA Hours"),r.a.createElement(w.a,{component:m.b,color:"inherit",to:"/"},"Urenstaat"),r.a.createElement(w.a,{component:m.b,color:"inherit",to:"/template"},"Template"),r.a.createElement(w.a,{color:"inherit",startIcon:r.a.createElement(j.a,null)},t.displayName))))}var x=a(183),T=a(164),N=Object(h.a)((function(e){return{root:{height:"100%",minHeight:"100%",width:"100%",position:"fixed",background:"url('./bg-pattern-triangles.png') 0 0 repeat"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"transparent"}}}));function D(){var e=N();return r.a.createElement(T.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(x.a,{className:e.avatar},r.a.createElement("img",{src:"./Icon-green.svg",alt:"CODEZILLA logo",height:"100%",width:"100%"})),r.a.createElement(g.a,{component:"h1",variant:"h4"},"CODEZILLA Hours"),r.a.createElement(g.a,{component:"subtitle1",variant:"subtitle1"},"Bezig met aanmelden...")))}var S=a(56),W=a(29),B=a(76),M=a(77),z=a(19),H=a(78),P=a(173),A=a(176),L=a(166),F=a(172),J=a(174),R=a(175),G=a(182),K=a(170),Z=a(169),U=a(171),V=a(186),q=a(184),Y=a(178),$=a(180),Q=a(113),X=a(177),_=a(181),ee=[{id:"worked",description:"Gewerkt",enabled:!0},{id:"overtime",description:"Overwerk",enabled:!0},{id:"sick",description:"Ziek",enabled:!0},{id:"holiday",description:"Verlof",enabled:!0},{id:"publicHoliday",description:"Feestdag",enabled:!0},{id:"available",description:"Beschikbaar",enabled:!1},{id:"education",description:"Opleiding",enabled:!1},{id:"other",description:"Overig",enabled:!1},{id:"standBy",description:"StandBy",enabled:!1},{id:"kilometers",description:"Kilometers",enabled:!1}],te=[{id:1,description:"Januari"},{id:2,description:"Februari"},{id:3,description:"Maart"},{id:4,description:"April"},{id:5,description:"Mei"},{id:6,description:"Juni"},{id:7,description:"Juli"},{id:8,description:"Augustus"},{id:9,description:"September"},{id:10,description:"Oktober"},{id:11,description:"November"},{id:12,description:"December"}],ae=[2020,2021,2022,2023,2025],ne=function(e){function t(e){var a;Object(S.a)(this,t),(a=Object(B.a)(this,Object(M.a)(t).call(this,e))).columns=ee,a.months=te,a.years=ae,a.isTemplate=!1,a.snackbarOpen=!1,a.isLoading=!0,a.fetchMonth=function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var i,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.firestore(),e.next=3,i.collection("months").get();case 3:o=e.sent,(l=o.docs.find((function(e){var a=e.data();return a.month===t&&a.year===n&&a.profileId===r})))&&a.setState((function(e){return e.data=l.data(),e.data.id=l.id,console.log(e.data),e})),a.isLoading=!1;case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.fetchTemplate=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.firestore(),e.next=3,n.collection("template").doc(t).get();case 3:(r=e.sent)&&a.setState((function(e){return e.data.days=r.data().days,e.data.id=r.id,e})),a.isLoading=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleClose=function(e,t){"clickaway"!==t&&a.setState((function(e){return e.snackbarOpen=!1,e}))},a.isTemplate="template"===e.type;var n=(new Date).getFullYear(),r=(new Date).getMonth()+1;return a.submitHours=a.submitHours.bind(Object(z.a)(a)),a.submitTemplate=a.submitTemplate.bind(Object(z.a)(a)),a.handleClientInput=a.handleClientInput.bind(Object(z.a)(a)),a.handleProjectInput=a.handleProjectInput.bind(Object(z.a)(a)),a.save=a.save.bind(Object(z.a)(a)),a.state={data:{id:"",days:a.getDaysInMonth(r,n),expandColumns:a.isTemplate,month:r,year:n,client:"",project:"",profileId:e.profile.id,profile:e.profile,isFinal:!1},snackbarOpen:!1},a.isTemplate?a.fetchTemplate(e.profile.id):a.fetchMonth(r,n,e.profile.id),a}return Object(H.a)(t,e),Object(W.a)(t,[{key:"handleChange",value:function(e,t,a){var n=this.state.data.days,r=Number(e);n[a][t]=isNaN(r)?"":r,this.setState(Object(d.a)({},this.state.data,{days:n}))}},{key:"expandColumns",value:function(e){this.setState((function(t){return t.data.expandColumns=e,t}))}},{key:"setMonth",value:function(e,t){var a=this.getDaysInMonth(e,t);this.setState((function(n){return n.data.month=e,n.data.year=t,n.data.days=a,n})),this.fetchMonth(e,t,this.props.profile.id)}},{key:"getDaysInMonth",value:function(e,t){for(var a=new Date(t,e,0).getDate(),n=[],r=1;r<a;r++)n.push({day:r,dayOfTheWeek:new Date(t,e-1,r).getDay(),date:new Date(t,e-1,r),worked:"",overtime:"",sick:"",holiday:"",publicHoliday:"",available:"",education:"",other:"",standBy:"",kilometers:"",explanation:""});return n}},{key:"getRowClass",value:function(e){return this.isNotWeekend(e.dayOfTheWeek)?"":"highlight"}},{key:"getTotal",value:function(e){return this.state.data.days.map((function(t){return t[e]})).reduce((function(e,t){return Number(e)+Number(t)}))}},{key:"isNotWeekend",value:function(e){return 0!==e&&6!==e||this.isTemplate}},{key:"hoursCell",value:function(e,t){var a=this;return r.a.createElement(L.a,{align:"right",key:e.day+"-"+t},this.isNotWeekend(e.dayOfTheWeek)?r.a.createElement(G.a,{id:t,inputProps:{style:{textAlign:"right"},day:e.day},value:e[t],onChange:function(n){return a.handleChange(n.target.value,t,e.day-1)},onBlur:function(){return a.save(a.isTemplate)},size:"small"}):null)}},{key:"handleClientInput",value:function(e){this.setState((function(t){return t.data.client=e,t}))}},{key:"handleProjectInput",value:function(e){this.setState((function(t){return t.data.project=e,t}))}},{key:"submitHours",value:function(){var e=this;console.log(this.state.data),v.firestore().collection("months").doc(this.state.data.year+"-"+this.state.data.month+"-"+this.state.data.profile.displayName).set(this.state.data).then((function(t){e.setState((function(e){return e.snackbarOpen=!0,e}))})).catch((function(e){console.error("Error adding document: ",e)}))}},{key:"submitTemplate",value:function(){var e=this,t=this.state.data.days.map((function(e){return delete e.date,delete e.dayOfTheWeek,e}));v.firestore().collection("template").doc(this.props.profile.id).set({days:t}).then((function(t){e.setState((function(e){return e.snackbarOpen=!0,e}))})).catch((function(e){console.error("Error adding document: ",e)}))}},{key:"save",value:function(e){e?this.submitTemplate():this.submitHours()}},{key:"makeFinal",value:function(e,t){this.setState((function(t){return t.data.isFinal=e,t}),this.save(t))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{noValidate:!0,autoComplete:"off"},this.isTemplate?null:r.a.createElement(k.a,null,r.a.createElement(K.a,{container:!0,direction:"row",alignItems:"flex-start"},r.a.createElement(Z.a,null,r.a.createElement(V.a,{id:"select-month-label"},"Maand"),r.a.createElement(Y.a,{labelId:"select-month-label",id:"select-month-label",value:this.state.data.month,onChange:function(t){return e.setMonth(t.target.value,e.state.data.year)}},this.months.map((function(e){return r.a.createElement(q.a,{value:e.id,key:e.id},e.description)})))),r.a.createElement(Z.a,null,r.a.createElement(V.a,{id:"select-year-label"},"Jaar"),r.a.createElement(Y.a,{labelId:"select-year-label",id:"select-year-label",value:this.state.data.year,onChange:function(t){return e.setMonth(e.state.data.month,t.target.value)}},this.years.map((function(e){return r.a.createElement(q.a,{value:e,key:e},e)})))),r.a.createElement(G.a,{id:"client",label:"Klant",value:this.state.data.client,onChange:function(t){return e.handleClientInput(t.target.value)}}),r.a.createElement(G.a,{id:"project",label:"Project",value:this.state.data.project,onChange:function(t){return e.handleProjectInput(t.target.value)}}),r.a.createElement(U.a,{control:r.a.createElement($.a,{checked:this.state.data.expandColumns,onChange:function(t){return e.expandColumns(t.target.checked)},color:"primary"}),label:"Toon alle velden"}),r.a.createElement(U.a,{control:r.a.createElement($.a,{checked:this.state.data.isFinal,onChange:function(t){return e.makeFinal(t.target.checked,e.isTemplate)},color:"primary"}),label:"Definitief"}))),r.a.createElement(F.a,{component:Q.a,className:"hoursGrid"},r.a.createElement(P.a,{stickyHeader:!0,size:"small","aria-label":"simple table"},r.a.createElement(J.a,null,r.a.createElement(R.a,null,r.a.createElement(L.a,null),this.columns.map((function(t){return t.enabled||e.state.data.expandColumns?r.a.createElement(L.a,{align:"right",key:"header-"+t.id},t.description):null})),r.a.createElement(L.a,{align:"right"},"Toelichting"))),r.a.createElement(A.a,null,this.state.data.days.map((function(t){return r.a.createElement(R.a,{key:t.day,className:e.getRowClass(t)},r.a.createElement(L.a,{component:"th",scope:"row"},t.day),e.columns.map((function(a){return a.enabled||e.state.data.expandColumns?e.hoursCell(t,a.id):null})),r.a.createElement(L.a,{align:"right"},e.isNotWeekend(t.dayOfTheWeek)?r.a.createElement(G.a,{id:"explanation",inputProps:{day:t.day},onBlur:function(a){return e.handleChange(a.target.value,"explanation",t.day)}}):null))}))),r.a.createElement(X.a,null,r.a.createElement(R.a,null,r.a.createElement(L.a,null," Totaal"),this.columns.map((function(t){return t.enabled||e.state.data.expandColumns?r.a.createElement(L.a,{align:"right",key:"footer-"+t.id},e.getTotal(t.id)):null})),r.a.createElement(L.a,{align:"right"}))))),r.a.createElement(_.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:this.handleClose,open:this.state.snackbarOpen,autoHideDuration:6e3,message:"Opgeslagen"}))}}]),t}(r.a.Component),re=Object(h.a)((function(e){return{activeItem:{backgroundColor:e.palette.primary[100]},item:{},menuButton:{marginRight:36},hide:{display:"none"},toolbar:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1},title:{margin:e.spacing(0,1)}}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){var e=re(),t=r.a.useState({}),a=Object(u.a)(t,2),n=a[0],i=a[1],o=r.a.useState(!0),l=Object(u.a)(o,2),d=l[0],h=l[1];r.a.useEffect((function(){!function(){var e=new v.auth.OAuthProvider("microsoft.com");e.setCustomParameters({tenant:"45c0a280-6475-473d-a8ee-a5684b93879c"}),v.auth().signInWithPopup(e).then((function(e){b(e.user)})).catch((function(e){}))}()}),[]);var b=function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.firestore(),e.next=3,a.collection("profile").get();case 3:if(n=e.sent,r=n.docs.find((function(e){return e.data().microsoftId===t.uid}))){e.next=8;break}return y(t),e.abrupt("return");case 8:(o=r.data()).id=r.id,i(o),h(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=v.firestore(),a={displayName:e.displayName,microsoftId:e.uid,email:e.email};t.collection("profile").add(a).then((function(e){a.id=e.id,i(a)})).catch((function(e){console.error("Error adding document: ",e)})),h(!1)};return r.a.createElement("div",{className:e.root},d?r.a.createElement(D,null):r.a.createElement(m.a,null,r.a.createElement(f.a,null),r.a.createElement(I,{profile:n}),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement(ne,{type:"month",profile:n})),r.a.createElement(p.a,{path:"/template"},r.a.createElement(g.a,{variant:"h4",component:"h4",className:e.title},"Template"),r.a.createElement(ne,{type:"template",profile:n})))),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-app.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-analytics.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-auth.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.11.0/firebase-firestore.js"}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,a){e.exports=a(112)},94:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.b9fb73e7.chunk.js.map